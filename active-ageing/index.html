<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Active Ageing</title>
  <link rel="stylesheet" href="../styles.css">
 <!-- Standard favicon -->
  <link rel="icon" href="../favicon.png" type="image/png">

  <!-- Apple Touch Icon -->
  <link rel="apple-touch-icon" href="../favicon-180x180.png">

  <!-- Optional for higher resolution screens -->
  <link rel="icon" sizes="32x32" href="../favicon-32x32.png">
  <link rel="icon" sizes="16x16" href="../favicon-16x16.png">
  <link rel="icon" sizes="48x48" href="../favicon-48x48.png">
  <link rel="icon" sizes="96x96" href="../favicon-96x96.png">
  <link rel="icon" sizes="192x192" href="../favicon-192x192.png">
</head>
  
  <script src="https://d3js.org/d3.v7.min.js"></script>

<body class="iot">
  <div class="loading-screen">
    <img src="../logos/logo.gif" alt="Loading...">
</div>

 <!-- Top Banner -->
<div class="top-banner">
  <div class="logo">
    <a href="/" class="logo-link">
      <img 
        src="../logos/logo.png" 
        data-gif="../logos/logo.gif" 
        data-duration="1520"
        alt="Logo" 
        class="logo-img"
      >
    </a>
  </div>
  <div class="menu">
    <a href="#Connect">Connect</a>
  </div>
</div>


  <!-- Page Content -->

  <div class="iot-page-container">
    <!-- Logo Section -->
    <div class="iot-logo-container">
        <img src="../media/IoTtitle.png" alt="Logo" class="iot-logo">
    </div>
    
<div class="iot-video-container">
    <video controls autoplay muted loop>
        <source src="../media/activeageing.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
      <a href="https://dl.acm.org/doi/abs/10.1145/3679318.3685410" class="iot-read-paper-btn" target="_blank">Read Paper</a>

   </div>
 <!-- Horizontal Line -->
    <div class="section-divider"></div>

    <!-- Title -->
    <h2 class="section-title">Self Powered, low level sensors</h2>

    <!-- Image Row -->
    <div class="iot-image-row">
        <!-- Image 1 -->
        <div>
            <img src="../media/switch.webp" alt="Switch module">
            <p class="iot-image-caption">A switch to detect movement of doors & drawers</p>
        </div>

        <!-- Image 2 -->
        <div>
            <img src="../media/photocell.webp" alt="Photocell module">
            <p class="iot-image-caption">A photocell to detect light</p>
        </div>

        <!-- Image 3 -->
        <div>
            <img src="../media/pir.webp" alt="PIR module">
            <p class="iot-image-caption">A passive infrared sensor
to detect movement</p>
        </div>
    </div>

     <!-- SVG Container for Heatmap -->
    <svg class="heatmap"></svg>
    
</div>

  <div id="chart"></div>

    <script>
        const eventCategories = {
            "Cooking/Eating": ["Pan Draw", "Cutlery Cupboard", "Fridge"],
            "Kitchen Light": ["Kitchen Light"],
            "Hobbies/Recreation/Socialising": ["Reading", "Front Door"]
        };

        const categoryMultipliers = {
            "Cooking/Eating": 2,
            "Kitchen Light": 10,
            "Hobbies/Recreation/Socialising": 25
        };

        const data = [
            "15-08-2023, 13:52:22, Kitchen Light",
            "15-08-2023, 15:02:28, Cutlery Cupboard",
            "15-08-2023, 15:47:53, Cutlery Cupboard",
            // Add more data entries...
        ];

        // Aggregating the counts
        const eventCounts = {};

        data.forEach(item => {
            const parts = item.split(", ");
            const event = parts[2]; // Extract the activity
            eventCounts[event] = (eventCounts[event] || 0) + 1;
        });

        // Setting up the chart size
        const width = 800;
        const height = 400;

        // Create SVG container
        const svg = d3.select("#chart")
            .append("svg")
            .attr("width", width)
            .attr("height", height);

        // Create scales
        const x = d3.scaleBand()
            .domain(Object.keys(eventCounts))
            .range([0, width])
            .padding(0.1);

        const y = d3.scaleLinear()
            .domain([0, d3.max(Object.values(eventCounts))])
            .nice()
            .range([height, 0]);

        // Add bars to the chart
        svg.selectAll(".bar")
            .data(Object.entries(eventCounts))
            .enter()
            .append("rect")
            .attr("class", "bar")
            .attr("x", d => x(d[0]))
            .attr("y", d => y(d[1]))
            .attr("width", x.bandwidth())
            .attr("height", d => height - y(d[1]))
            .attr("fill", "steelblue");

        // Add x-axis
        svg.append("g")
            .attr("transform", `translate(0, ${height})`)
            .call(d3.axisBottom(x));

        // Add y-axis
        svg.append("g")
            .call(d3.axisLeft(y));
    </script>
  


  <!-- Include the JavaScript file at the end of the body -->
  <script src="heatmap.js"></script>
  <script src="../main.js"></script>
</body>
</html>
